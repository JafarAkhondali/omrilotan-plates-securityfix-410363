/*!
 * Stencil JavaScript Templating Engine v1.0.6
 * git://github.com/watermelonbunny/Stencil.git
 * Watermelonbunny
 */
var Stencil=function(a,b){b=b||{};var c={},d=a||"Templates.html",e=b.templateTagName||"template",f=function(a){return typeof a==="function"?a:function(a){return a}},g=function(){var a=typeof document.defaultView.Node==="object"?document.defaultView.Node:{ELEMENT_NODE:1,TEXT_NODE:3,DOCUMENT_FRAGMENT_NODE:11};return function(b,c){c=c.toUpperCase();return typeof b.nodeType==="number"&&b.nodeType===a[c]}}(),h=function(a){var b=false;try{b=a instanceof HTMLElement}catch(c){b=typeof a==="object"&&g(a,"ELEMENT_NODE")&&typeof a.style==="object"&&typeof a.ownerDocument==="object"}return b},i=function(a){var b;if(h(a)||g(a,"DOCUMENT_FRAGMENT_NODE")){return a}else if(typeof a==="string"){b=document.querySelector(a);return i(b)}else{new Error("Stencil.js Error: unable to obtain element")}},j=function(a){if(typeof a!=="string"){new Error("Stencil.js Error: Attribute name must be a string");return undefined}var b={IF:"sys-if",LISTENER:"sys-listener",LISTENER_SEPERATOR:"::",DATA:"sys-data",TEMPLATE:"sys-template",REVERSE:"sys-reverse",INCLUDE:"sys-include",CONVERT:"sys-convertdata",HANDLE:"sys-handleelement"};return b[a.toUpperCase()]},k=function(){return/\{\{.*\}\}/gmi},l=function(a){return a.replace(/(^[\s]+|[\s]+$)/g,"")},m=function(a){return a.replace(/\{\{( )*/gmi,"").replace(/( )*\}\}/gmi,"")},n=function(a){var b=a.split("."),c=document.defaultView,d=0,e=b.length;for(;d<e;d++){c=c[b[d]]}return c},o=function(){if(typeof document.defaultView.addEventListener==="function"){return function(a,b,c){if(!h(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.addEventListener(l(d[e]),c)}}return a}}else if(typeof document.attachEvent==="function"){return function(a,b,c){if(!h(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.attachEvent(l(d[e]),c)}}return a}}else{return function(a,b,c){if(!h(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a["on"+l(d[e])]=c}}return a}}}(),p=function(a){if(g(c[a],"ELEMENT_NODE")===false){new Error("Stencil.js Error: Template not found");return false}return c[a].cloneNode(true)},q=function(a){var b=typeof a==="string"?p(a):a,c=document.createDocumentFragment();while(b.childNodes.length>0){if(typeof b.childNodes[0]==="object"&&g(b.childNodes[0],"ELEMENT_NODE")){c.appendChild(b.childNodes[0])}else{b.removeChild(b.childNodes[0])}}b=null;return c},r=function(a,b){for(var c in b){if(b.hasOwnProperty(c)){var d=new RegExp("\\{{( )*"+c+"( )*\\}}","gmi");a=a.replace(d,b[c])}}return a},s=function(a,b){var c=a.nodeValue,d,e;for(e in b){if(b.hasOwnProperty(e)){c=r(c,b)}}c=c.replace(k(),"");d=document.createTextNode(c);a.parentNode.replaceChild(d,a);return c},t=function(a,b){if(typeof a.attributes==="object"&&a.attributes!==null){var c=a.attributes.length,d={sysif:j("if"),listener:j("listener"),handle:j("handle"),include:j("include"),convert:j("convert")},e=b[a.getAttribute(d.convert)],f="";if(typeof e==="function"){b=x(b,e(b));a.removeAttribute(d.convert);c=a.attributes.length}while(c--){f=a.attributes[c].name;switch(f){case d.sysif:if(!b[m(a.getAttribute(f))]){a.parentNode.removeChild(a)}else{a.removeAttribute(f)}break;case d.listener:u(a,m(a.getAttribute(f)),b);a.removeAttribute(f);break;case d.handle:var g=b[m(a.getAttribute(f))]||n(a.getAttribute(f));if(typeof g==="function"){setTimeout(function(){g(a)},15)}a.removeAttribute(f);break;case d.include:a.appendChild(Stencil.get(m(a.getAttribute(f)),b));a.removeAttribute(f);break;default:v(a,a.attributes[c].name,b);break}}}return a},u=function(a,b,c){var d=j("listener_seperator");if(typeof b!=="string"||b.indexOf(d)===-1||typeof c!=="object"){return false}var e=b.split(d),f=typeof c[e[1]]==="function"?c[e[1]]:n(e[1]);if(typeof f==="function"){o(a,e[0],f)}},v=function(a,b,c){a.setAttribute(b,r(a.getAttribute(b),c));return a},w=function(a,b){var c=a.childNodes.length;if(g(a,"TEXT_NODE")&&k().test(a.nodeValue)){s(a,b)}else{if(g(a,"ELEMENT_NODE")&&typeof a.getAttribute(j("data"))==="string"){y(a,b)}else{if(g(a,"DOCUMENT_FRAGMENT_NODE")===false){t(a,b)}while(c--){w(a.childNodes[c],b)}}}return a},x=function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a},y=function(a,b){if(typeof b!=="object"){return false}var c=b[a.getAttribute(j("data"))]||[],d=a.getAttribute(j("template")),e=a.getAttribute(j("reverse")),f=b[e]==true||n(e)||typeof e==="string"&&m(e).toLowerCase()==="true"?true:false,g=b[a.getAttribute(j("convert"))],h=a.parentNode;if(typeof c.length==="number"){var i=z(d,c,g,f);h.replaceChild(i,a)}return h},z=function(a,b,c,d){var e=document.createDocumentFragment(),g=0,h=b.length;if(d===true){while(h--){c=f(c);e.appendChild(Stencil.get(a,x(b[g],c(b[g]))))}}else{for(;g<h;g++){c=f(c);e.appendChild(Stencil.get(a,x(b[g],c(b[g]))))}}return e};(function(a){var b=new XMLHttpRequest,d=document.implementation.createHTMLDocument("TemplatesDocument"),f=[],g=0;b.open("GET",a,false);b.setRequestHeader("Content-Type","text/html");b.onload=function(){if(b.readyState===4&&(b.status===200||b.status===0)){d.body.innerHTML=b.responseText;f=d.getElementsByTagName(e);g=f.length;while(g--){c[f[g].getAttribute("name")]=f[g]}d=null}};try{b.send()}catch(h){alert(h.name+": "+h.code+"\n\r"+h.message)}})(d);return{get:function(a,b,c){b=b||{};c=f(c);return c(w(q(a),b))},insert:function(a,b,c,d){a=i(a);if(a.childNodes.length>0){return i(a).insertBefore(this.get(b,c,d),a.firstChild)}else{return this.append(a,b,c,d)}},append:function(a,b,c,d){return i(a).appendChild(this.get(b,c,d))},clearAndAppend:function(a,b,c,d){a=i(a);a.innerHTML="";return this.append(a,b,c,d)}}}