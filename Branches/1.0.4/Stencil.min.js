/*!
 * Stencil JavaScript Templating Engine v1.0.4
 * git://github.com/watermelonbunny/Stencil.git
 * Watermelonbunny
 */
var Stencil=function(a,b){b=b||{};var c={},d=a||"Templates.html",e=b.templateTagName||"template",f=function(a){return typeof a==="function"?a:function(a){return a}},g=function(){var a=typeof document.defaultView.Node==="object"?document.defaultView.Node:{ELEMENT_NODE:1,TEXT_NODE:3,DOCUMENT_FRAGMENT_NODE:11};return function(b,c){c=c.toUpperCase();return typeof b.nodeType==="number"&&b.nodeType===a[c]}}(),h=function(a){var b=false;try{b=a instanceof HTMLElement}catch(c){b=typeof a==="object"&&g(a,"ELEMENT_NODE")&&typeof a.style==="object"&&typeof a.ownerDocument==="object"}return b},i=function(a){var b;if(h(a)||g(a,"DOCUMENT_FRAGMENT_NODE")){return a}else if(typeof a==="string"){b=document.querySelector(a);return i(b)}else{new Error("Stencil.js Error: unable to obtain element")}},j=function(a){if(typeof a!=="string"){new Error("Stencil.js Error: Attribute name must be a string");return undefined}var b={IF:"sys-if",LISTENER:"sys-listener",LISTENER_SEPERATOR:"::",DATA:"sys-data",TEMPLATE:"sys-template",INCLUDE:"sys-include",CONVERT:"sys-convertdata",HANDLE:"sys-handleelement"};return b[a.toUpperCase()]},k=function(){return/\{\{.*\}\}/gmi},l=function(a){return a.replace(/(^[\s]+|[\s]+$)/g,"")},m=function(a){return a.replace(/\{\{( )*/gmi,"").replace(/( )*\}\}/gmi,"")},n=function(a){var b=a.split("."),c=document.defaultView,d=0,e=b.length;for(;d<e;d++){c=c[b[d]]}return c},o=function(){if(typeof document.defaultView.addEventListener==="function"){return function(a,b,c){if(!h(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.addEventListener(l(d[e]),c)}}return a}}else if(typeof document.attachEvent==="function"){return function(a,b,c){if(!isDOMElement(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.attachEvent(l(d[e]),c)}}return a}}else{return function(a,b,c){if(!isDOMElement(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a["on"+l(d[e])]=c}}return a}}}(),p=function(){if(typeof document.defaultView.removeEventListener==="function"){return function(a,b,c){if(!isDOMElement(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.removeEventListener(l(d[e]),c)}}return a}}else if(typeof document.detachEvent==="function"){return function(a,b,c){if(!isDOMElement(a)||typeof b!=="string"||typeof c!=="function"){new Error("Stencil.js Error: Listener not attached")}else{var d=b.split(","),e=d.length;while(e--){a.detachEvent(l(d[e]),c)}}return a}}else{return function(a,b){if(!isDOMElement(a)||typeof b!=="string"){new Error("Stencil.js Error: Listener not attached")}else{var c=b.split(","),d=c.length;while(d--){a["on"+l(c[d])]=null}}return a}}}(),q=function(a){if(g(c[a],"ELEMENT_NODE")===false){new Error("Stencil.js Error: Template not found");return false}return c[a].cloneNode(true)},r=function(a){var b=typeof a==="string"?q(a):a,c=document.createDocumentFragment(),d=b.childNodes;while(b.childNodes.length>0){if(typeof b.childNodes[0]==="object"&&g(b.childNodes[0],"ELEMENT_NODE")){c.appendChild(b.childNodes[0])}else{b.removeChild(b.childNodes[0])}}b=null;return c},s=function(a,b){for(var c in b){var d=new RegExp("\\{{( )*"+c+"( )*\\}}","gmi");a=a.replace(d,b[c])}return a},t=function(a,b){var c=a.nodeValue,d,e;for(e in b){c=s(c,b)}c=c.replace(k(),"");d=document.createTextNode(c);a.parentNode.replaceChild(d,a);return c},u=function(a,b){if(typeof a.attributes==="object"&&a.attributes!==null){var c=a.attributes.length,d={"if":j("if"),listener:j("listener"),handle:j("handle"),include:j("include"),convert:j("convert")},e=b[a.getAttribute(d["convert"])],f="";if(typeof e==="function"){b=y(b,e(b));a.removeAttribute(d["convert"]);c=a.attributes.length}while(c--){f=a.attributes[c].name;switch(f){case d["if"]:if(!b[m(a.getAttribute(f))]){a.parentNode.removeChild(a)}else{a.removeAttribute(f)}break;case d["listener"]:v(a,m(a.getAttribute(f)),b);a.removeAttribute(f);break;case d["handle"]:codeafter=b[m(a.getAttribute(f))]||n(a.getAttribute(f));if(typeof codeafter==="function"){setTimeout(function(){codeafter(a)},15)}a.removeAttribute(f);break;case d["include"]:a.appendChild(Stencil.get(m(a.getAttribute(f)),b));a.removeAttribute(f);break;default:w(a,a.attributes[c].name,b);break}}}return a},v=function(a,b,c){var d=j("listener_seperator");if(typeof b!=="string"||b.indexOf(d)===-1||typeof c!=="object"){return false}var e=b.split(d),f=typeof c[e[1]]==="function"?c[e[1]]:n(e[1]);if(typeof f==="function"){o(a,e[0],f)}},w=function(a,b,c){a.setAttribute(b,s(a.getAttribute(b),c));return a},x=function(a,b){var c=a.childNodes.length;if(g(a,"TEXT_NODE")&&k().test(a.nodeValue)){t(a,b)}else{if(g(a,"ELEMENT_NODE")&&typeof a.getAttribute(j("data"))==="string"){z(a,b)}else{if(g(a,"DOCUMENT_FRAGMENT_NODE")===false){u(a,b)}while(c--){x(a.childNodes[c],b)}}}return a},y=function(a,b){for(var c in b){a[c]=b[c]}return a},z=function(a,b){if(typeof b!=="object"){return false}var c=b[a.getAttribute(j("data"))]||[],d=a.getAttribute(j("template")),e=b[a.getAttribute(j("convert"))],f=a.parentNode;if(typeof c.length==="number"){var g=A(d,c,e);f.replaceChild(g,a)}return f},A=function(a,b,c){var d=document.createDocumentFragment();for(var e=0,g=b.length;e<g;e++){c=f(c);d.appendChild(Stencil.get(a,y(b[e],c(b[e]))))}return d};(function(a){var b=new XMLHttpRequest,d=document.implementation.createHTMLDocument("TemplatesDocument"),f=[],g=0;b.open("GET",a,false);b.setRequestHeader("Content-Type","text/html");b.onload=function(a){if(b.readyState===4&&(b.status===200||b.status===0)){d.body.innerHTML=b.responseText;f=d.getElementsByTagName(e);g=f.length;while(g--){c[f[g].getAttribute("name")]=f[g]}d=null}};try{b.send()}catch(h){alert(h.name+": "+h.code+"\n\r"+h.message)}})(d);return{get:function(a,b,c){b=b||{};c=f(c);return c(x(r(a),b))},insert:function(a,b,c,d){a=i(a);if(a.childNodes.length>0){return i(a).insertBefore(this.get(b,c,d),a.firstChild)}else{return this.append(a,b,c,d)}},append:function(a,b,c,d){return i(a).appendChild(this.get(b,c,d))},clearAndAppend:function(a,b,c,d){a=i(a);a.innerHTML="";return this.append(a,b,c,d)}}};